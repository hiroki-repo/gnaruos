#include "stdcall.as"
/*#module
#defcfunc syscall int prm_0,int prm_1,int prm_2,int prm_3,int prm_4,int prm_5,int prm_6,int prm_7
return 0
#global*/
#include "migs_stabilizer.as"
dupptr inkey,sysvalptr@stdcallinterface(17),4,4
dupptr mclick,sysvalptr@stdcallinterface(18),4,4
if windowisnotfirstrun=0{
windowx=pid*8
windowy=pid*8
windowmaxx=320
windowmaxy=200+8
windowisnotfirstrun=1
inket="":inkeys=""
buttoni1=0
buttoni2=0
buttoni3=""
crtconsm=""
ttyconsm=""
//---FONT(GIF Image)---
dim fontimg,1356
fontimg(0)=0x38464947,0x01006139,0x00F70100,0x00000000
fontimg(4)=0x00FFFFFF,0x00000000,0x00000000,0x00000000
fontimg(8)=0x00000000,0x00000000,0x00000000,0x00000000
fontimg(12)=0x00000000,0x00000000,0x00000000,0x00000000
fontimg(16)=0x00000000,0x00000000,0x00000000,0x00000000
fontimg(20)=0x00000000,0x00000000,0x00000000,0x00000000
fontimg(24)=0x00000000,0x00000000,0x00000000,0x00000000
fontimg(28)=0x00000000,0x00000000,0x00000000,0x00000000
fontimg(32)=0x00000000,0x00000000,0x00000000,0x00000000
fontimg(36)=0x00000000,0x00000000,0x00000000,0x00000000
fontimg(40)=0x00000000,0x00000000,0x00000000,0x00000000
fontimg(44)=0x00000000,0x00000000,0x00000000,0x00000000
fontimg(48)=0x00000000,0x00000000,0x00000000,0x00000000
fontimg(52)=0x00000000,0x00000000,0x00000000,0x00000000
fontimg(56)=0x00000000,0x00000000,0x00000000,0x00000000
fontimg(60)=0x00000000,0x00000000,0x00000000,0x00000000
fontimg(64)=0x00000000,0x00000000,0x00000000,0x00000000
fontimg(68)=0x00000000,0x00000000,0x00000000,0x00000000
fontimg(72)=0x00000000,0x00000000,0x00000000,0x00000000
fontimg(76)=0x00000000,0x00000000,0x00000000,0x00000000
fontimg(80)=0x00000000,0x00000000,0x00000000,0x00000000
fontimg(84)=0x00000000,0x00000000,0x00000000,0x00000000
fontimg(88)=0x00000000,0x00000000,0x00000000,0x00000000
fontimg(92)=0x00000000,0x00000000,0x00000000,0x00000000
fontimg(96)=0x00000000,0x00000000,0x00000000,0x00000000
fontimg(100)=0x00000000,0x00000000,0x00000000,0x00000000
fontimg(104)=0x00000000,0x00000000,0x00000000,0x00000000
fontimg(108)=0x00000000,0x00000000,0x00000000,0x00000000
fontimg(112)=0x00000000,0x00000000,0x00000000,0x00000000
fontimg(116)=0x00000000,0x00000000,0x00000000,0x00000000
fontimg(120)=0x00000000,0x00000000,0x00000000,0x00000000
fontimg(124)=0x00000000,0x00000000,0x00000000,0x00000000
fontimg(128)=0x00000000,0x00000000,0x00000000,0x00000000
fontimg(132)=0x00000000,0x00000000,0x00000000,0x00000000
fontimg(136)=0x00000000,0x00000000,0x00000000,0x00000000
fontimg(140)=0x00000000,0x00000000,0x00000000,0x00000000
fontimg(144)=0x00000000,0x00000000,0x00000000,0x00000000
fontimg(148)=0x00000000,0x00000000,0x00000000,0x00000000
fontimg(152)=0x00000000,0x00000000,0x00000000,0x00000000
fontimg(156)=0x00000000,0x00000000,0x00000000,0x00000000
fontimg(160)=0x00000000,0x00000000,0x00000000,0x00000000
fontimg(164)=0x00000000,0x00000000,0x00000000,0x00000000
fontimg(168)=0x00000000,0x00000000,0x00000000,0x00000000
fontimg(172)=0x00000000,0x00000000,0x00000000,0x00000000
fontimg(176)=0x00000000,0x00000000,0x00000000,0x00000000
fontimg(180)=0x00000000,0x00000000,0x00000000,0x00000000
fontimg(184)=0x00000000,0x00000000,0x00000000,0x00000000
fontimg(188)=0x00000000,0x00000000,0x00000000,0x00000000
fontimg(192)=0x00000000,0x00000000,0x00000000,0x00002C00
fontimg(196)=0x01000000,0x08000100,0x080100FE,0xA0B0481C
fontimg(200)=0x12010041,0x50883806,0x0C84C3A1,0x585C3E05
fontimg(204)=0x83C42270,0xCC121F16,0x44E190E8,0x52411783
fontimg(208)=0xA231D914,0x43038D44,0xD0D91C56,0x2F9646E4
fontimg(212)=0x99846263,0x9BCBA152,0xCCBE552B,0x4E63F268
fontimg(216)=0xEE392494,0xA4B33A14,0x811E914C,0x3279F446
fontimg(220)=0x3A9751E9,0x5A9D3E6B,0x99CE2A33,0x44AE9B54
fontimg(224)=0xD6ABB5BA,0xB6AF58AC,0xAB963AF4,0xD351B153
fontimg(228)=0x945AB4D2,0x6A86D1A5,0x2B1596CD,0xB25C6D97
fontimg(232)=0x05EAA55F,0xDDE6F72B,0xFAE77CBC,0xEFB84B5D
fontimg(236)=0xDD559B52,0x92AAA622,0x85BB55ED,0xFB0E3AC9
fontimg(240)=0xCBE07274,0xEE6AF17B,0x66701919,0x362F27CE
fontimg(244)=0xAC1A38A6,0x1967C3E5,0x57FBA62B,0xA79C6A30
fontimg(248)=0x0CFECB3D,0xD9EBB3B5,0x9E964B5C,0x63F0DBBB
fontimg(252)=0xD2996A8E,0x62D92D06,0x9595E152,0x9B1C9F02
fontimg(256)=0x61CDF236,0xDBD6AF75,0xE060FA1B,0xA6E2DF41
fontimg(260)=0x5B67999C,0xFE95DDED,0x3BFE272F,0x5ACC4D3B
fontimg(264)=0x0BCF27A5,0xDB69AE99,0x5EBFCFEC,0x6FBE5B0F
fontimg(268)=0xDB99F2DE,0x753F1EE7,0x4DC1FF6D,0xFE60DF77
fontimg(272)=0x811D5679,0x1F5795C5,0xD7EDF980,0x5A02819C
fontimg(276)=0x7081DD07,0x7F1E8845,0x5AE7C1CE,0xB791AD6B
fontimg(280)=0xBE188260,0xB7875867,0x815F8885,0xA227BA27
fontimg(284)=0xA8722466,0xF61E8A21,0x2D6CE267,0x7B5CD86A
fontimg(288)=0xA1686DC3,0x6686387B,0x79E061DC,0x0F709E67
fontimg(292)=0x8D224626,0x63D50D4A,0x48E5D871,0xC2459221
fontimg(296)=0xDF909F88,0x8F9CF611,0xE1594654,0xB95E2591
fontimg(300)=0x360C8365,0x418AE489,0x99E668A9,0xE6A9A668
fontimg(304)=0xE9B66C9A,0xC6709BE6,0x749CE729,0x9DE769D6
fontimg(308)=0xD4378255,0xD90E3F71,0x3A609660,0x238CA3B9
fontimg(312)=0x839CB6DA,0x63785DFB,0x595282A2,0xFD8B9E66
fontimg(316)=0x6F97E7A4,0xA069692D,0x98A8B263,0xA84A3398
fontimg(320)=0x1699A328,0x52831AAA,0x5D620A86,0x23697698
fontimg(324)=0xF76E25A8,0x08FE82A9,0xACA2E7DE,0x2AAAB683
fontimg(328)=0x8A5DDCA9,0xDA039722,0xB187EAFA,0x93EB584E
fontimg(332)=0x24B8AA29,0x3AEEA87D,0xFA9E8BEC,0xBFAF639A
fontimg(336)=0xADE64AD2,0x2267FECF,0x9A1AD8B1,0x2ECEABAA
fontimg(340)=0xC1B5AB0A,0xB524992A,0xEE5B8E58,0x3866C769
fontimg(344)=0x3250856A,0xDF8FA5EA,0xB81F38C6,0x641B8AF4
fontimg(348)=0xEBDA9CAA,0xF6EAB6EE,0xD75B5EAB,0xB868FA45
fontimg(352)=0xAA5BCAF3,0x168ADFB0,0x49FA96A1,0xFF576B39
fontimg(356)=0x84B05B22,0xB15A4E87,0xAC5E90B9,0x2DA4C270
fontimg(360)=0xE9606ACC,0xC46EB842,0xB20C11E1,0xFC5E7CC6
fontimg(364)=0x163FC69B,0x078D6149,0x642AAC87,0xB06B65A3
fontimg(368)=0xA9DF07B3,0xF6A7B425,0xD7B4AD3B,0x9ED89C0A
fontimg(372)=0x33BCDE82,0x7D1E74CE,0x4B36D121,0x8EAF742A
fontimg(376)=0xB2F0E4FE,0x31378F46,0x5BC6D59E,0x3B45C6DF
fontimg(380)=0xEFA22E8D,0xCFF41BB2,0x6CDBE6C2,0xAD634A9D
fontimg(384)=0xBB6CDAF6,0x6F9AF699,0xDCF72DB7,0x76AD5F74
fontimg(388)=0xCBEEE7DC,0x5197FE99,0xB9766B2B,0x77CBDE7E
fontimg(392)=0x9E17759F,0x1314D3F2,0x87D6AFAE,0xD0B81E1E
fontimg(396)=0xB1FA537D,0x0BF377E1,0xF35DD8EF,0xBA6633C9
fontimg(400)=0xE5396AE6,0xB329AB9B,0x7E7EF8C5,0x96DDD2F9
fontimg(404)=0x86E86B8E,0xD8AF5DE3,0x2ACC3132,0x9E92018E
fontimg(408)=0x1B4D9726,0x67CE756B,0x6E6019B3,0x699B7393
fontimg(412)=0x8DA788ED,0x3666D53B,0x6DEF376E,0xF335CC2A
fontimg(416)=0x3AAD7BB0,0x7C6246B0,0xFE80E0F2,0x0AEBA76D
fontimg(420)=0xE93A1C92,0xFD5B4783,0xCC63D7A4,0x736BF2A9
fontimg(424)=0xDBB335BF,0xFA2F4F91,0x70DE7FEF,0xEBEBA8A7
fontimg(428)=0x433AD6BE,0xC1DEE88E,0xB27DA787,0xFE1A9B98
fontimg(432)=0xD63917D6,0xA66E0FF4,0xB8EBD723,0x75843305
fontimg(436)=0x73F5664A,0x82D0FEDB,0x2D41A038,0x95136481
fontimg(440)=0xB76804A6,0x7E6DCDAF,0xD81D9B2B,0xBC9447CC
fontimg(444)=0x657ACE09,0x6EE4A0AB,0xD52AB8B6,0x1240820D
fontimg(448)=0x47C0FF21,0x6DE5F838,0x602B6180,0xC2A7B0EA
fontimg(452)=0x688F41FC,0x9D0326FE,0xC1F88710,0x88904A03
fontimg(456)=0x11624C48,0x9E44685F,0x7F78CFA9,0x79135962
fontimg(460)=0xC53F4534,0xA43D89E9,0x8806D21F,0x8FAA2943
fontimg(464)=0x9C53C985,0x3D28AAEF,0x88F079E5,0x1499A268
fontimg(468)=0xB0C586B1,0x6B8DA99D,0xA09BDD4C,0xE1953878
fontimg(472)=0x0BF78E09,0xE8B31CE3,0xF0463244,0xA3BB528F
fontimg(476)=0x4837C71F,0x8A8E6A40,0x14E37C41,0xE6C796E3
fontimg(480)=0x70857215,0x12EEA382,0xB1964619,0x7C6C862E
fontimg(484)=0xB9150EA4,0x5251D947,0x1DEC9677,0x49D932FF
fontimg(488)=0x82527214,0x1A605C9E,0x46C64917,0x627ED18E
fontimg(492)=0x352461BC,0x6166C7C9,0xACAD76F1,0xC9610225
fontimg(496)=0xB01A5743,0xE5549394,0xCAB98729,0x4C31D9AF
fontimg(500)=0x23E3AB15,0x54C14785,0xC4983182,0x9331A454
fontimg(504)=0x5A50AF39,0x44C09671,0xB8F530A4,0xB17E044A
fontimg(508)=0xD483289A,0x4A38E315,0x9CD33E6D,0x37E5C4DC
fontimg(512)=0x42436991,0x989AD38E,0xBD32A744,0x866DC6E8
fontimg(516)=0xFE849490,0x4D3D1C8C,0xC612CF99,0xD9B597F3
fontimg(520)=0x27A8FFE7,0xF38265CD,0x670C6598,0x487A10C0
fontimg(524)=0xA04E3E5C,0xE5674C18,0x6C50A488,0xBC9F11A2
fontimg(528)=0x290FE814,0x51ECB6D8,0xCC7B9C73,0x3A2109E4
fontimg(532)=0xB2F641D2,0x1DA46278,0xBD19D74A,0x7F548A82
fontimg(536)=0x3D571D24,0x1A46A843,0x342CEBDE,0xFF2F939C
fontimg(540)=0x9A7F3499,0xE4B09E90,0xE66AD71D,0x4EC6184F
fontimg(544)=0xA99A726F,0x5348B50B,0x5234C699,0xF3E33BDA
fontimg(548)=0x88A95724,0xEFA907A6,0x36D3A5D4,0xC6A74F3A
fontimg(552)=0x5D55A7F4,0x07E05128,0xB3DAB0C3,0xA16CFC98
fontimg(556)=0xCFDA3F4E,0x9A742250,0x026B224D,0x82CE7ACD
fontimg(560)=0xA29374EE,0xE5466B63,0x75F3D1EA,0xE57E3E2C
fontimg(564)=0x0AC51F60,0xD40E7E57,0xE84BBB9B,0xD6CA8B5B
fontimg(568)=0xB18A6EA1,0xBEE5B582,0xAA5879EA,0x0471D41A
fontimg(572)=0xB8F56724,0x32C8333A,0x9B55B255,0x6B2D2C61
fontimg(576)=0x12BA2A54,0x6CE1E6A2,0x55686B4D,0x847076D0
fontimg(580)=0xACFE4CFA,0x54DA1321,0x8B6D6686,0x0E6D8AB6
fontimg(584)=0xD750D8A3,0x7AAA143E,0x634FAA4D,0x4DCE4F08
fontimg(588)=0x05273F4E,0xE6072061,0xB702C55B,0xA2F44A9D
fontimg(592)=0x5157D312,0xB51576E3,0x5A6BDDD3,0xDB463BB3
fontimg(596)=0x4F8A3032,0x89622AD5,0xB9D3C6A7,0x358FB893
fontimg(600)=0x89990923,0x92CAC720,0x692C4C89,0x490A5B79
fontimg(604)=0x251582CC,0x712DC3E1,0xBA5F5BDC,0xE79A737D
fontimg(608)=0xA8E66EF4,0x1EF35C13,0x7163AEB5,0x687D5E2C
fontimg(612)=0xB50A72D1,0x2ABE03C0,0x557BE974,0xB2B7F304
fontimg(616)=0x4E64760C,0x91602ACF,0x01BEF811,0x2141303B
fontimg(620)=0x8F04D7F6,0x9CA5BA96,0xEC21806F,0x76930AE1
fontimg(624)=0xD6F1D3B2,0xE27C2E6B,0xC5D239CA,0x5B5E5E06
fontimg(628)=0xE7177855,0x43C16C75,0x4588F0FB,0xA2A563EC
fontimg(632)=0x2625A4CD,0xAC77172A,0x074B175C,0x2A9DE6C8
fontimg(636)=0xE50C6918,0xA794829E,0x8BACABD0,0xE0577A88
fontimg(640)=0x495FD7B2,0xAB4AED86,0xDADFD96B,0xD59FCB0E
fontimg(644)=0xB8B6FEB2,0x3AB355AC,0x9652C853,0x3A5375DE
fontimg(648)=0xD6DEE2DC,0x6EDB2E7D,0x639BB759,0xC494731C
fontimg(652)=0xEF6B567E,0x3BC9FC64,0x7AB8F8F3,0x299F2B9E
fontimg(656)=0xC268626C,0xFCD7C4B9,0x9C870C9E,0x561AAF66
fontimg(660)=0x6FC5C8CC,0xC74BF32D,0x995A7B46,0xA1749E59
fontimg(664)=0xBC1CF999,0x2DCF1A66,0xF57AF4DB,0x9F4F680B
fontimg(668)=0x164BA51A,0x2C6D771F,0x37EF2FDC,0x74AEA0CC
fontimg(672)=0xEB3B6FAC,0x75D95F2B,0xA4B5CE34,0x4A6B6D77
fontimg(676)=0x9C67AA13,0x15B12DED,0xD680EBE8,0xEEC6C5B8
fontimg(680)=0xA7573826,0x39BE0363,0x6CCE56B4,0x59F5791E
fontimg(684)=0x625B5280,0x756FA691,0x4461CD08,0xA97DBADF
fontimg(688)=0xE5A8EC8E,0xA192EC89,0x233DC957,0x1DBD8AF7
fontimg(692)=0x938B481D,0xB7CEBCD9,0x5BF73D05,0x61F6F5E0
fontimg(696)=0xB4773616,0xBA6CE701,0x19D97BE2,0xFD467774
fontimg(700)=0xC99F300D,0x8683E071,0xDDC76171,0x10E95A5A
fontimg(704)=0xF822B5D8,0xF10BC594,0xB87A95F2,0x4EF1CE82
fontimg(708)=0x720DFFFE,0xB44FC77D,0xC7791C94,0x81B665AB
fontimg(712)=0x8884ED46,0x3365F275,0x01536876,0x2F029190
fontimg(716)=0xAA954534,0x7A7E8772,0xF56DB27B,0xF3EC4505
fontimg(720)=0xE4361765,0x4B27C668,0x545E7DBF,0xEB968CBD
fontimg(724)=0x29CCB746,0x2F6CF19B,0x76F7DF9D,0x796E8EFA
fontimg(728)=0xFD4D93D6,0xE53DB3D2,0x68697719,0x310959BF
fontimg(732)=0xA3A4BF5C,0x41401BDF,0x65C6F77E,0x8B4950C7
fontimg(736)=0x86B5ED8D,0xCEBDDF7B,0x97F3DEBB,0xFDEF045F
fontimg(740)=0xE66F80EF,0x5A6EFDAA,0x9F79CF32,0xCCE4ACD1
fontimg(744)=0x23DD850B,0xDAA818A7,0x41E26A7E,0x354D78B9
fontimg(748)=0x6E1ADB3E,0x295FA8B3,0x1D5F4751,0x3BB79742
fontimg(752)=0xF08F352A,0xDDBDAB95,0x84EFBECD,0x3CFA3A43
fontimg(756)=0x89B09E97,0x8B695A3D,0xA7A0E4CE,0x7E5DAF3E
fontimg(760)=0x6B1BC17D,0x5B4BD9C4,0xEBCE18BB,0xF84DE9E3
fontimg(764)=0xEE328BA8,0xD02AFFB7,0xE367FF87,0x6FE4DF3B
fontimg(768)=0x5773B5AF,0x92EED17F,0x47D8F4DE,0xFEA7EB9D
fontimg(772)=0xF6B46B0F,0xBCEADD9C,0x6F8BF3FE,0xBF03EDF2
fontimg(776)=0xBCC759E2,0xF5DFCDF5,0xDBBF83E6,0xD37F1FC7
fontimg(780)=0xCDF86EAD,0xF8FC9FBA,0xA1EC9A47,0x078E7DEE
fontimg(784)=0x42E2CED3,0x7EF6D57C,0x704B973A,0x46635767
fontimg(788)=0x62C6127D,0xC980225F,0x460F8036,0x78A81276
fontimg(792)=0x247B6536,0x780D61D6,0x81A8107F,0xBF76964B
fontimg(796)=0xA7FE8147,0x7F68004D,0x6B7FC746,0x97ED7F17
fontimg(800)=0x7A276C7F,0xC271A823,0xB71877A7,0x5D439D77
fontimg(804)=0x7282A7DF,0x38308313,0x8218343D,0xFA6EF801
fontimg(808)=0x33FD78C3,0x6C273476,0xAA84355B,0xC5BA2D94
fontimg(812)=0x5A282083,0x41796537,0x78465588,0x5B482477
fontimg(816)=0x492CB847,0xB81B79F8,0x7C76B22E,0x1374C842
fontimg(820)=0x864D5918,0x81C6CF7B,0x5E6DC3AF,0x05D68647
fontimg(824)=0x8337107D,0x507B07F0,0x186C6404,0x3135BC65
fontimg(828)=0x2883F5E4,0x585E8058,0x7BA54B66,0x4F694541
fontimg(832)=0xA4138487,0x3EC72F1A,0xE086081F,0xB9FE4245
fontimg(836)=0xA80E79C7,0x7727426B,0x7F868881,0x863A6F26
fontimg(840)=0x88B83885,0x1A88D6C3,0xA8065AA4,0x7A779B7F
fontimg(844)=0xE5793827,0x18616BB6,0x89783686,0x927BB878
fontimg(848)=0xD8A27B48,0x88440F89,0x1B85F7EC,0x57E985D8
fontimg(852)=0x8496868A,0xDC6D1728,0x283E6006,0x8B785B8B
fontimg(856)=0xBB826729,0xB5F68738,0x6308B94D,0xA445984C
fontimg(860)=0xF73C7F08,0x8CD78188,0xD08CF8CE,0x78D28D18
fontimg(864)=0x7D86287B,0x0C8C38C9,0x64225D17,0x83788A64
fontimg(868)=0xD671B8AC,0x56AC7356,0x52F7B08D,0x7D7675C9
fontimg(872)=0x38E08C17,0x5528834B,0x4453F6F6,0x57FD7618
fontimg(876)=0x5A587581,0xEB8CC72E,0xF5ED6967,0x85287A8E
fontimg(880)=0x717D5774,0xF31C5AF8,0x85490438,0x716D28D9
fontimg(884)=0x875240D6,0x2C17DD8A,0xD36EA901,0x54FD9066
fontimg(888)=0x76290790,0xB990A8FC,0x67837125,0x7D152A2D
fontimg(892)=0x317586CA,0x28FB84F3,0x85A5FC80,0xE87BD893
fontimg(896)=0xF91D6AB8,0x40091F70,0x9889F921,0xB886FE58
fontimg(900)=0x88C441B6,0x82891492,0x119236A8,0xA80492F9
fontimg(904)=0x8668AC8C,0x0A7498E3,0x78E29387,0x8AD93B6E
fontimg(908)=0x9251B930,0x74929408,0x3F341194,0x2C7A88D7
fontimg(912)=0xF7DA8909,0x7F223A8D,0x49919811,0x78A673F9
fontimg(916)=0x7A594470,0x299578A9,0x98FC86B8,0x2CA70D5A
fontimg(920)=0x0C736959,0xD5626A19,0x8FF72581,0x2A78296C
fontimg(924)=0xE96988E6,0x6F98F195,0x6F8B8747,0x39719419
fontimg(928)=0x97F97E8D,0x82981980,0x75C29839,0x95173371
fontimg(932)=0x5897E518,0x25BB7E18,0x7AC80F7A,0xF26AF97F
fontimg(936)=0x08635305,0x8ED6747A,0xF428B5A3,0xF8E99948
fontimg(940)=0x8EA95A98,0xA18F0912,0x56758749,0x54D5B19A
fontimg(944)=0x6993755D,0x36E88A08,0x8EB95D88,0xAB497918
fontimg(948)=0x87396DB5,0x78999F94,0x78775671,0x26819569
fontimg(952)=0x88794A96,0x9F8969B4,0xF9329889,0x92B2E965
fontimg(956)=0xF89C796E,0x394392D8,0x88B98635,0xBC3C33C7
fontimg(960)=0xB9319BE9,0x7019CA71,0xFD8BC5CA,0x6893E8FE
fontimg(964)=0x35386F59,0x9C293C9D,0x505AE6D7,0x99349E09
fontimg(968)=0x7C89749B,0xAF59D9DE,0xC85995F8,0x9E554872
fontimg(972)=0xE8191960,0xC9538999,0x96E5AB70,0xA78506A4
fontimg(976)=0xD6C58798,0x9C59259E,0x3D92B70F,0xB3899656
fontimg(980)=0x9DA7C69F,0x007A76C7,0x5304933A,0x9F86429F
fontimg(984)=0x0BA069F4,0x29634F79,0x9CB8C899,0x998F79A3
fontimg(988)=0xE63E6EB7,0x9CCA1AA1,0x0A8C7955,0x599743BA
fontimg(992)=0xA2571863,0x84A2A547,0xFA2EA2D9,0xA31A30A2
fontimg(996)=0xDC394A32,0x7A335F08,0x5D38D8A3,0x487D598B
fontimg(1000)=0x574A7C14,0xA3B81379,0x3E4438B0,0x697C76EA
fontimg(1004)=0x6B4970A4,0x2F60D98E,0xEA359778,0xA4D6198D
fontimg(1008)=0x9D8D47D2,0x98456727,0x89B8945D,0x9B5C69C2
fontimg(1012)=0x286386F9,0x7329DBA4,0x0D8888E6,0x98B59549
fontimg(1016)=0x9AA68B80,0x1F86286D,0x756B9BD7,0x9C42FC85
fontimg(1020)=0x1A903889,0x344B8758,0x7BBA1463,0x728B08E1
fontimg(1024)=0xD3D47E2A,0xA488FEA0,0xFE7FB9EB,0xCF73865D
fontimg(1028)=0x1A5BA789,0xA4993D61,0x117D98AA,0x74B991CA
fontimg(1032)=0xA899DFA8,0x60A8996A,0xC93694FA,0x507A8C89
fontimg(1036)=0x21A24689,0x8A687E5A,0x6875B573,0x2C842A5E
fontimg(1040)=0x296166C5,0x6219759A,0xA9A558B3,0x79A89429
fontimg(1044)=0xAB3A3872,0xB6AB5AB4,0x173B980A,0x571ABA5E
fontimg(1048)=0xCC99869A,0x92F282E5,0x219A4A9F,0x2F8BE8E7
fontimg(1052)=0x45E1ABB6,0x99472D70,0x87A0F966,0x4AC48E48
fontimg(1056)=0x5556A8A6,0xC847613E,0x9AD5356A,0x74F3246A
fontimg(1060)=0x53A61ACD,0xA5838408,0x34158123,0xD8ABDAD4
fontimg(1064)=0x6563AD7A,0x76864FAE,0xA884031E,0x6AC1A68A
fontimg(1068)=0x70B94687,0xD9ABCA8A,0x9AF6ACBA,0xAF71DEAE
fontimg(1072)=0x80AF9AEC,0xFA109DD2,0x2292C53B,0xA67E7667
fontimg(1076)=0x7AEAAFAA,0xAE7AFBA2,0x45AEBB0B,0xA59EADA6
fontimg(1080)=0x767B0141,0x051BB6C7,0x79C17B5B,0xABC490A5
fontimg(1084)=0x09B0D80B,0x4B0E5BBB,0x92762052,0x9DA70B1E
fontimg(1088)=0x2B213629,0x42D3C423,0x62FE6B1C,0x7BAFDAFE
fontimg(1092)=0x47CAAFC9,0xB0FA187D,0x97B178E7,0x1B04B293
fontimg(1096)=0xB1DAECA7,0xCE8C6B1F,0xFB3FACA6,0x68AADB2F
fontimg(1100)=0x43B3D38C,0x7913A1F9,0x88E760AC,0xB4B10654
fontimg(1104)=0xFB328BA9,0xB39AE963,0x4197D3C8,0x9A2B7146
fontimg(1108)=0x97BB435E,0x256969C6,0xFB5DB0CB,0xAD94B2B0
fontimg(1112)=0x48AE26E0,0x29EAA0BB,0x1E293F72,0x93955AB9
fontimg(1116)=0x6B2FB219,0xB65B09B3,0x2BB6769A,0x48F6B03B
fontimg(1120)=0xADD711B1,0x611C951E,0x1B53B74B,0xB42B5DB8
fontimg(1124)=0x1A972ABE,0x8A479AE9,0xAF56FD80,0x50B72B08
fontimg(1128)=0xAB91B8FB,0x688AF8B3,0x10741B51,0xC99CA6FA
fontimg(1132)=0xAE889A5A,0x8EAE8B9E,0x5B8B94E7,0x9C09B378
fontimg(1136)=0xA8B9F928,0xCBA1ABAB,0xAC5A6074,0x4BAAAAAD
fontimg(1140)=0x4701B58B,0xA258FFA5,0x171E2B37,0x8B0AA864
fontimg(1144)=0xB7DAA942,0xF789EA4C,0x65DAB1A9,0xA55ABF92
fontimg(1148)=0x8F6AE9B1,0x291EB7B8,0x613BB095,0xDC312B13
fontimg(1152)=0x5B2E9B7A,0x61E6D09B,0xA8ABFECF,0x3576D915
fontimg(1156)=0x969CB5CB,0x660AEDBC,0x47B4A21E,0x2A01A6AB
fontimg(1160)=0xB31BE4B4,0x04706BA6,0xABC3B3CA,0xA65BDCB7
fontimg(1164)=0x96BD2440,0x995CA6D9,0x9298F581,0x5A734939
fontimg(1168)=0x5BECA83B,0xBEFB157B,0xA065E3A3,0xA711BC49
fontimg(1172)=0xBCDBFB9D,0x73998755,0x6B86674B,0xA936AF81
fontimg(1176)=0x4354E9EC,0x74413EB7,0x2C49DBC0,0xAAB4C82B
fontimg(1180)=0x7B90A137,0xA1283DB2,0xD987D9DD,0x387BC1FB
fontimg(1184)=0xC1271E9A,0x683B92D4,0x59D9B4AB,0x6F89F272
fontimg(1188)=0x39C10BF7,0xDC22C24A,0x9C8B8A8A,0xDEB7940A
fontimg(1192)=0x399924C3,0xBC79E841,0x8FA0EC40,0xDBBEC336
fontimg(1196)=0x92EC1BB8,0x76C1873F,0xEA629F09,0x9D4BD570
fontimg(1200)=0xCF644C4D,0x5BA57EDA,0x1F4ACBAE,0xB6778C16
fontimg(1204)=0x8AE3A019,0xB16907C4,0xD4AD6BDF,0x06326024
fontimg(1208)=0x8679EB70,0x4EC0CBB9,0x99FE5148,0xC61631C4
fontimg(1212)=0xCEC71C63,0x9C66693B,0xBDB8C9BD,0x7AAB79F6
fontimg(1216)=0xDC7CC7BC,0xBBD444C7,0x40DA33FE,0xBBA40909
fontimg(1220)=0xBB99C109,0x98386AA8,0x84917C82,0xBBFCA08C
fontimg(1224)=0x84B8BDA9,0x67B64B4C,0xB706B8E9,0x9FD8B4B5
fontimg(1228)=0x5BC876AD,0xAC0D8F29,0x36461B5E,0xC46F5C6C
fontimg(1232)=0x540EA439,0xAF18DDBE,0x62BD4924,0xEC2CC2A9
fontimg(1236)=0x79BBBCC3,0x4D884C55,0x5CAA81EC,0xA05CACA7
fontimg(1240)=0xB7CAF2D3,0x990EBF96,0xBC8CB4BE,0x8FC85C90
fontimg(1244)=0xA9F1B00A,0x88D7442D,0x5E9E3754,0x3C43885C
fontimg(1248)=0xC8795DBA,0x48A90CBA,0xB6F6C3FC,0xAB2922CC
fontimg(1252)=0xBF6C1CA6,0x984EA88B,0x819C4EC7,0x22ADD7E7
fontimg(1256)=0x2AB98C1A,0xCD0C8FAA,0xC7235CC4,0x671FC4FB
fontimg(1260)=0x794CD85B,0xD284A57C,0x1C45A6E9,0xC30BF28A
fontimg(1264)=0x59CF5BDE,0xFC8EC8CB,0xBE1AAFCB,0xC4C80933
fontimg(1268)=0x09E9AF3C,0x281C58CE,0xFFC836F0,0x0C26CDAC
fontimg(1272)=0xB34B4F22,0x79C5451A,0xDCC9CF6A,0xCCDAE539
fontimg(1276)=0x7FB6BA23,0x659AD03A,0xA9AB5E66,0xBBCC7A03
fontimg(1280)=0xABF1B54C,0xFEBD1BB6,0xCA8A74BC,0x949EF9AF
fontimg(1284)=0x59D19BBA,0xC04BF484,0xC2D00A4B,0xCD0472BC
fontimg(1288)=0xD316959A,0xE1D3383D,0xCAB2D35C,0xD43C7ED2
fontimg(1292)=0x46D45D44,0x4CF2B88D,0x8E1C94B5,0x69B943B2
fontimg(1296)=0x6D48CE2A,0xA4FD4FBF,0x99AC0B53,0xFC9FD495
fontimg(1300)=0xD5572A84,0x4CAB1D50,0x8D60D4AD,0xD61BA4D5
fontimg(1304)=0x63D57D5D,0xFD62D59D,0xD67D68D5,0x6AD5CD6C
fontimg(1308)=0xCB75D6DD,0xD6ED6FD6,0x71D73D51,0xAD76D6FD
fontimg(1312)=0xD51D78B3,0x7CD5ED74,0xFD75D77D,0xD81D7AD7
fontimg(1316)=0x66D7DAB1,0xDB30D79D,0xD5C71CD4,0x71D53D54
fontimg(1320)=0xFD5BD8DD,0xD91D8ED8,0x47835D4E,0x9D98D97D
fontimg(1324)=0x98CD9AD9,0xE4AC6662,0xFC25D87C,0xD92D3DD9
fontimg(1328)=0x64D89D95,0x13ADA4FD,0xAA4AD3CB,0xACDAAD8B
fontimg(1332)=0x5D52C0FD,0xD8CC94DA,0xABDA9D4F,0xEC44DB0D
fontimg(1336)=0xDBBBC2D9,0xA7DB2DA3,0x0DA6DA4D,0xDAFB2078
fontimg(1340)=0xA1D72D9D,0x47F6DBCD,0xD6BDBEDB,0xC3385DA8
fontimg(1344)=0xDDC7DB8D,0xA51FE896,0xDC1DBDDB,0xCADD6DB1
fontimg(1348)=0x78DECF4D,0xDB9DC5DB,0xDEDDFDD3,0x0DB3DD9D
fontimg(1352)=0x10EDE3DC,0x3B000101,0x00000000,0x00000000
//---COMPATIBLE ROM(https://web.archive.org/web/20190426000800/http://retropc.net/mz-memories/mz700/kyodaku.html)---
dim romimg,0x1000/4
romimg(0)=0xC3004AC3,0x0EC307E6,0x0918C309,0xC30920C3
romimg(4)=0x35C3007F,0x0981C309,0xC30999C3,0x32C308BD
romimg(8)=0x0436C30A,0xC30475C3,0xF8C304D8,0x0588C304
romimg(12)=0xC301C7C3,0x00000308,0xC31038C3,0xE5C30358
romimg(16)=0x02FAC302,0xC302ABC3,0xF03102BE,0xCD56ED10
romimg(20)=0x163E0FC9,0x213C06D7,0xD8CD1170,0x0392210F
romimg(24)=0x3832C33E,0x10392210,0x22050421,0xBECD119E
romimg(28)=0x01411102,0x0AC0CDDF,0xF1110818,0xC3961810
romimg(32)=0xF0310926,0x00821110,0x0009CDD5,0x11D72A3E
romimg(36)=0x03CD11A3,0x2AFE1A00,0x130C54C2,0xCA47FE1A
romimg(40)=0x46FE0159,0xFEF600CA,0x0C0FCA4D,0x82CA53FE
romimg(44)=0xCA40FE0C,0x4CFE0E0E,0x50FE1F28,0x52FE3628
romimg(48)=0xFE01AACA,0x0212CA23,0xCD0A9BC3,0x2DCD00E8
romimg(52)=0x110A3800,0xDFCF01C4,0x00E8CDC9,0x0167DAEF
romimg(56)=0x7C11062A,0xE9D812FE,0x380027CD,0x3811CF95
romimg(60)=0x8618DF01,0x0ED00011,0x1A280619,0xCD0BCECD
romimg(64)=0x1013010F,0xCD0D3EF6,0x200D010F,0xF5D5C9EC
romimg(68)=0x0DE6FEDB,0xCD0728B7,0x7728001E,0xD3F1F218
romimg(72)=0xD3803EFF,0xE6FEDBFE,0x2001FE0D,0xFED3AFF8
romimg(76)=0x554F46C9,0x0D20444E,0x44414F4C,0x20474E49
romimg(80)=0x202A2A0D,0x4D905A4D,0x54494E4F,0x5620524F
romimg(84)=0x2E345245,0x2A2A2034,0xFE1A130D,0x1304204F
romimg(88)=0xCD131313,0xFEE90CC0,0x11CFC802,0xC9DF01B5
romimg(92)=0x9D32FF3E,0x18AFC911,0xF00021F9,0xE9C0B77E
romimg(96)=0x1AE5D5C5,0x050B20BE,0x0DFE0828,0x23130428
romimg(100)=0xD1E1F118,0xC3F5C9C1,0xFF3E0DAD,0x11C9E0D3
romimg(104)=0x11DF0131,0xC3DF10F1,0xE8CD0FE3,0x0FE3CD00
romimg(108)=0x00D1C3EF,0x45484300,0x55534B43,0x5245204D
romimg(112)=0x0D524F52,0xC50D4B4F,0x023EE5D5,0x0611A032
romimg(116)=0x0DFE1A01,0xC8FE0228,0xCFFE2E28,0xD7FE1E28
romimg(120)=0x23FE2228,0x20027121,0x13892E03,0x38021CCD
romimg(124)=0x02C8CDE0,0xABCD1538,0xD5184102,0xA032033E
romimg(128)=0xCD181311,0xF618013E,0xF502C8CD,0xF102BECD
romimg(132)=0xCD138018,0xCDD8041F,0xF618010F,0x1A0806C5
romimg(136)=0x230928BE,0xF8102323,0xC9C11337,0x235ED523
romimg(140)=0xB77CEB56,0xA03A0928,0x03283D11,0x22FA1829
romimg(144)=0x023E11A1,0xD111A032,0xE6471A13,0x2830FEF0
romimg(148)=0x119F3A05,0x78130718,0x9F320FE6,0x00064F11
romimg(152)=0x0902A121,0x119E3A4E,0x1081AF47,0xAF4FC1FD
romimg(156)=0x077743C9,0x4506A744,0x984605ED,0x04FC4705
romimg(160)=0x42047141,0x005203F5,0x070C4300,0x45064744
romimg(164)=0x48460598,0x04B44705,0x42043141,0x005203BB
romimg(168)=0x03020100,0x0C080604,0x2A201810,0xB77C11A1
romimg(172)=0xEBD50C28,0x73E00421,0xD1013E72,0x343E0618
romimg(176)=0xAFE00732,0xC9E00832,0x36E00021,0xE67E23F9
romimg(180)=0x37022008,0xE0083AC9,0x3AFA380F,0x300FE008
romimg(184)=0xAFF210FA,0x21E5C5C9,0xAECD0471,0xAF320602
romimg(188)=0x10075BCD,0xC3C1E1FA,0xC5F502BE,0x3E470FE6
romimg(192)=0x9E329008,0xC9F1C111,0xE5D5C5F3,0x3E119B32
romimg(196)=0x119C32F0,0xAFA8C021,0x23E552ED,0x32743EEB
romimg(200)=0xB03EE007,0x21E00732,0x7273E006,0x360A362B
romimg(204)=0x32803E00,0x4E23E007,0xFB20BA7E,0xF720BB79
romimg(208)=0x0000002B,0x7A361236,0x7E4ED123,0x79FB20BA
romimg(212)=0xE1F720BB,0xC9FBC1D1,0x32803EE5,0x0621E007
romimg(216)=0x565EF3E0,0xCAB27BFB,0x21AF0379,0x52EDA8C0
romimg(220)=0xEB0383DA,0xE1119B3A,0xA8C011C9,0xEE119B3A
romimg(224)=0xF3C9E101,0x7EE00621,0x2F7E5F2F,0xC313FB57
romimg(228)=0xC5F5037C,0x9B3AE5D5,0x3201EE11,0x803E119B
romimg(232)=0x21E00732,0x565EE006,0x19A8C021,0x21EB2B2B
romimg(236)=0x7273E006,0xF1C1D1E1,0xCD7CC9FB,0xCD7D03C3
romimg(240)=0xF5C903C3,0x0F0FF0E6,0xDACD0F0F,0x0012CD03
romimg(244)=0xCD0FE6F1,0x3ED703DA,0xE5D5C920,0xE603E921
romimg(248)=0x00165F0F,0xD1E17E19,0x323130C9,0x36353433
romimg(252)=0x41393837,0x45444342,0x01E5C546,0xE9211000
romimg(256)=0x0320BE03,0x23061879,0xF520050C,0xC9C1E137
romimg(260)=0x041FCDD5,0xCD670738,0x0138041F,0xC5C9D16F
romimg(264)=0xF1C3131A,0x070D3806,0x4F070707,0xF9CD131A
romimg(268)=0xB1013803,0xD5F3C9C1,0xD716E5C5,0xF021CC1E
romimg(272)=0x00800110,0xCD0733CD,0x63DA06B2,0xCCFE7B05
romimg(276)=0x09CD1120,0x6C11D500,0x0015CD04,0xCD10F111
romimg(280)=0xCDD10015,0x8DCD07B8,0x0563C304,0x54495257
romimg(284)=0x20474E49,0xC5D5F30D,0x1ED716E5,0x11022A53
romimg(288)=0x042AC1E5,0xCAB17811,0x44C304D4,0xE5C5D504
romimg(292)=0x5710373A,0x0032F93E,0xA5CD7EE0,0xE0013A07
romimg(296)=0x032008E6,0x232D1837,0xC2B1780B,0x972A0499
romimg(300)=0xA5CD7C11,0xA5CD7D07,0x0780CD07,0x04C4C215
romimg(304)=0x04D4C3B7,0x67CD0006,0xC6C20507,0xC5C1E104
romimg(308)=0x0499C3E5,0xC9D1C1E1,0xE5C5D5F3,0xCC1ED216
romimg(312)=0x21008001,0xB2CD10F0,0x0582DA06,0xDA065ECD
romimg(316)=0x10CD0582,0x0563C305,0xE5C5D5F3,0x531ED216
romimg(320)=0xE511022A,0x11042AC1,0x63CAB178,0x04E6C305
romimg(324)=0x2AE5C5D5,0x01011036,0xE00211E0,0x380601CD
romimg(328)=0x0655CD61,0x2820E61A,0x002154F3,0x11972200
romimg(332)=0xE5C5C1E1,0x380624CD,0x0B237749,0xF420B178
romimg(336)=0xCD11972A,0x3A380624,0x0624CD5F,0x20BD3438
romimg(340)=0x20BC7B23,0x3E0B181F,0x10373201,0x18023EC9
romimg(344)=0xE1AF00F8,0x00CDD1C1,0x9C3AF507,0x20F0FE11
romimg(348)=0xC9F1FB01,0x057CCA15,0x0516C362,0xC337013E
romimg(352)=0x023E0563,0x0563C337,0xE5C5D5F3,0xE511022A
romimg(356)=0x11042AC1,0x531ED216,0x63CAB178,0x0733CD05
romimg(360)=0xDA06B2CD,0x5ECD0582,0x0582DA06,0xC305B2CD
romimg(364)=0xC5D50563,0x10362AE5,0x11E00101,0x01CDE002
romimg(368)=0xCDBF3806,0xE61A0655,0x54F32820,0xE5C5C1E1
romimg(372)=0x380624CD,0xA420BEAD,0xB1780B23,0x992AF220
romimg(376)=0x0624CD11,0xCD9520BC,0x20BD0624,0x62CA158F
romimg(380)=0xB8C36205,0xC0067805,0xD6023080,0x3AC34740
romimg(384)=0x32F93E08,0x0A00E000,0x0FC208E6,0x1AC93706
romimg(388)=0x07C220E6,0x08E60A06,0x37061DC2,0x20E61AC9
romimg(392)=0xC90615CA,0x21E5D5C5,0x01010800,0xE00211E0
romimg(396)=0x380601CD,0x0655CD1C,0x2820E61A,0x972AE50A
romimg(400)=0x97222311,0x7D37E111,0x20256F17,0x0601CDE3
romimg(404)=0xC1D1E17D,0x10353AC9,0x20FD203D,0xD5C5C900
romimg(408)=0x282821E5,0x28CCFE7B,0x14142103,0x01119522
romimg(412)=0x0211E001,0x11952AE0,0x380601CD,0x0655CD1E
romimg(416)=0x2820E61A,0xF02025F0,0x380601CD,0x0655CD0E
romimg(420)=0x2020E61A,0xF0202DE0,0xE10601CD,0xC2C9C1D1
romimg(424)=0x283E05F5,0x9511712A,0x0FB1CD47,0xC30FD8CD
romimg(428)=0xD5C507EE,0x3A0A0EE5,0x10E6E002,0xE1AF0528
romimg(432)=0x3EC9C1D1,0xE0032106,0x0D773C77,0x7ACFE920
romimg(436)=0x0628D7FE,0xDF072211,0x29110818,0x2411DF07
romimg(440)=0x023ADF07,0x2010E6E0,0x0A44CDD5,0x1837F420
romimg(444)=0x282FFECE,0x03F9CD06,0x1A0425C3,0x0434C313
romimg(448)=0x06D5C5F5,0xE0023A0A,0x042010E6,0xC9F1C1D1
romimg(452)=0x0332063E,0x32073EE0,0xC205E003,0xC1D10705
romimg(456)=0x207FC9F1,0x59414C50,0x52207F0D,0x524F4345
romimg(460)=0xC50D2E44,0x0011E5D5,0x20B17800,0x9722EB0B
romimg(464)=0x11992211,0xC9C1D1E1,0x0826E57E,0x13013007
romimg(468)=0xE1F92025,0xE1180B23,0x3D10363A,0x3AC9FD20
romimg(472)=0xF4180037,0xF5000000,0x0332033E,0x075FCDE0
romimg(476)=0x0332023E,0x075FCDE0,0xC308C9F1,0x000009E4
romimg(480)=0x32033EF5,0x5FCDE003,0x075FCD07,0x0332023E
romimg(484)=0x075FCDE0,0xF10762CD,0x32003EC9,0x26211034
romimg(488)=0x10352219,0x0806C5C9,0x070780CD,0xD40780DC
romimg(492)=0xC2050767,0xC9C107AB,0x017BD5C5,0x28112AF8
romimg(496)=0xCACCFE28,0xBE0107CC,0x1414110A,0x0B0767CD
romimg(500)=0xF820B178,0x150780CD,0x67CDFA20,0xFA201D07
romimg(504)=0xD10780CD,0xC5F5C9C1,0x32AFD5E5,0xB3CD1193
romimg(508)=0x9D3A4709,0x6DCCB711,0xF0E6780C,0x3720C0FE
romimg(512)=0x28CDFE78,0x28C9FE56,0x28CAFE1D,0xCACBFE14
romimg(516)=0xC8FE08B3,0xC7FE0B28,0x933A0728,0x1C20B711
romimg(520)=0x0DDCCD78,0x7021C818,0x20BEAF11,0xD6773C01
romimg(524)=0x03322F06,0xCDB718E0,0x6A280A44,0x0DA6CD78
romimg(528)=0xFE0DB5CD,0x21A72062,0x2F7E1193,0xFE9F1877
romimg(532)=0x0F42CAD7,0xDCFED5FE,0x2A069FC3,0x165C1171
romimg(536)=0x11732100,0xB71AEB19,0x2A002801,0x7AC21171
romimg(540)=0xB71A1308,0xC3087DCA,0x0E25087B,0xCD002E50
romimg(544)=0xD5D10FB4,0x0DA6CDC5,0xE1C1B0ED,0xCD7E41E5
romimg(548)=0x23770BCE,0x0D36F810,0x20FE7E2B,0x06CDF828
romimg(552)=0xC1E1D100,0xFE78C9F1,0x0DF6CAD1,0x29CAD3FE
romimg(556)=0xE19C180E,0x231B36E5,0xE2180D36,0x08CACD00
romimg(560)=0x0220F0FE,0xCECDC9AF,0xD5C5C90B,0x0A50CDE5
romimg(564)=0x06380778,0xD1E1F03E,0xD207C9C1,0x000608EC
romimg(568)=0x09000821,0x190AC911,0x08D6C37E,0xB711703A
romimg(572)=0x0608FDC2,0x0AC92100,0xD6C37E09,0xF0E67908
romimg(576)=0xE679470F,0xA0C6800F,0xC300266F,0x32AF08E4
romimg(580)=0xCD3E1194,0xC90DDCCD,0xB711943A,0x0006C3C8
romimg(584)=0x35CD203E,0x0CCDC909,0x11943A00,0x0AD6C8B7
romimg(588)=0xFA20F438,0xCA0DFEC9,0x4FC5090E,0x0196CD47
romimg(592)=0x780946CD,0xCD79C9C1,0xE64F0BB9,0xC8F0FEF0
romimg(596)=0xC279C0FE,0xC7FE0970,0xCD0970D2,0xC3FE0DDC
romimg(600)=0xFE0973CA,0x096BCAC5,0xAFC0C6FE,0xC9119432
romimg(604)=0x3A0DB5CD,0xFE3C1194,0xD6023850,0x11943250
romimg(608)=0xD5C5F5C9,0x96CD0506,0x0DFE1A01,0x4F0FDFCA
romimg(612)=0x130946CD,0x84C3F310,0xD5C5F509,0x96CD0506
romimg(616)=0x0DFE1A01,0xCD0FDFCA,0x70CD0BB9,0xF1101309
romimg(620)=0xC5099CC3,0xB1CDE5D5,0x0DA6CD0F,0x118E327E
romimg(624)=0x21118F22,0xEF361192,0xE00032AF,0x2F119132
romimg(628)=0x16E00032,0x09FFCD14,0x780A50CD,0x0BE6DA07
romimg(632)=0x09D5C215,0xCD09FFCD,0xF0FE08CA,0xF5077ACA
romimg(636)=0x3A0DA6CD,0x8F2A118E,0xE1F17711,0xF5C9C1D1
romimg(640)=0xE0023AE5,0x25DA0707,0x11913A0A,0x0A22DA0F
romimg(644)=0x2A11923A,0xA6CD118F,0x913A770D,0x3201EE11
romimg(648)=0xF1E11191,0x11913AC9,0x0A22D20F,0xC3118E3A
romimg(652)=0xF83E0A13,0x00E00032,0x2FE0013A,0x44C221E6
romimg(656)=0xC901C60A,0x0032F93E,0x013A00E0,0xC908E6E0
romimg(660)=0xFA06E5D5,0x78050016,0xFEE00032,0x420420EF
romimg(664)=0xFEC9D1E1,0x3A1F28F8,0xB72FE001,0xCB5FE828
romimg(668)=0x0FE678FA,0x07070707,0x3D083E4F,0x03CB0428
romimg(672)=0x4F81F930,0x013AD018,0xE65F2FE0,0xCB022821
romimg(676)=0xDEE67BF2,0xD618C028,0xFE003ECD,0x00CBCA56
romimg(680)=0x13C043FE,0xCA41FE1A,0x31FE079E,0xFE0557CA
romimg(684)=0x055DCA32,0xB8C242FE,0x0D14210C,0xC9103522
romimg(688)=0xCD0799CD,0x76C30557,0x25232101,0x1D2A2927
romimg(692)=0x6563611F,0x5D6A6967,0x2624225F,0x1E1C2028
romimg(696)=0x666462D1,0x5E5C6068,0x140511D0,0x312B0F15
romimg(700)=0x54455133,0x716B4F55,0x19121773,0x32301009
romimg(704)=0x595257D3,0x72705049,0x070401D2,0x351B0C0A
romimg(708)=0x47444137,0x755B4C4A,0x08061377,0x36342C0B
romimg(712)=0x484653D5,0x76746C4B,0x02031AD4,0x39C92E0D
romimg(716)=0x42435A3B,0x79CA6E4D,0x0E16187B,0x3A382D2F
romimg(720)=0x4E5658D7,0x7A786D6F,0xF0C7F0D6,0x3DF0CDC3
romimg(724)=0xF0C8F03F,0x7DF0CDC4,0xC100C57F,0x3E3CF0F0
romimg(728)=0xC200C6DC,0x7E7CF0CB,0xA5A3A1D8,0x9DAAA9A7
romimg(732)=0xA6A4A29F,0x9E9CA0A8,0x948591DD,0xB1AB8F95
romimg(736)=0x999297B3,0xB2B09089,0x878481DE,0xB59B8C8A
romimg(740)=0x888693B7,0xB6B4AC8B,0x82839AD9,0xB9C9AE8D
romimg(744)=0x8E9698BB,0xBAB8ADAF,0xF0C7F0DA,0xBDF0CDC3
romimg(748)=0xC100C5BF,0xBEBCF0F0,0xFEE5C5DB,0x211C3817
romimg(752)=0xE0010CC6,0x20B1ED00,0x91DF3E1A,0xE5C50A18
romimg(756)=0x4F0CC621,0x7E090006,0xFEC9C1E1,0xC6043811
romimg(760)=0xAFF518B0,0x343AF218,0xD3C2B710,0xB9087909
romimg(764)=0x0609E0CA,0x08CACD04,0xCD573FE6,0xCACD09FF
romimg(768)=0xBA3FE608,0x0B09E7C2,0xE4CAB178,0x13EC1809
romimg(772)=0x060410CD,0x0C30CD10,0xB708CACD,0xCBFE0528
romimg(776)=0xCDF210C8,0xCDFE09B3,0xC0B7E928,0xE5180106
romimg(780)=0x03BACDC5,0xE5C50806,0xCD7ED7AF,0xAF2303C3
romimg(784)=0xD7F710D7,0xCD7EC1E1,0xB5CD0BB9,0xF610230D
romimg(788)=0x0006C3C1,0x1E0CC0CD,0x041FCDA8,0x13770538
romimg(792)=0x3EF61823,0xCDD0BBA9,0x8EC303BA,0x2AE5C500
romimg(796)=0xFE7D1036,0x2E033810,0xAECD2450,0xC3070602
romimg(800)=0x1A1302EF,0x70CA53FE,0xCA47FE01,0xC0CD0176
romimg(804)=0x1104220C,0xCDAA1EE5,0xEDD10410,0x02222352
romimg(808)=0x11AF1111,0x220CC0CD,0xF1111106,0x11B42110
romimg(812)=0xED001001,0x120D3EB0,0xE7019FCD,0xC90024D2
romimg(816)=0xD00410CD,0x4120C9D1,0x45444342,0x49484746
romimg(820)=0x4D4C4B4A,0x51504F4E,0x55545352,0x59585756
romimg(824)=0xDDCDFB5A,0x3130D1CB,0x35343332,0x39383736
romimg(828)=0x2F3B3D2D,0xF4E52C2E,0xE2E3DAEC,0xE8E6D4D7
romimg(832)=0xC7C4C1C2,0xE120CACF,0x5FFAC8FE,0x3FF7F1F8
romimg(836)=0xE9DCDBCC,0x3C5E3AF5,0x405DF35B,0x5CFC3EC9
romimg(840)=0xCED0DFC6,0x21FFD2D3,0x25242322,0x29282726
romimg(844)=0xF6DE2A2B,0xC5C3EAEB,0xE7E4F0EF,0xFDE0EDEE
romimg(848)=0xF9F2D5D8,0xA120D6D9,0x929C9F9A,0xA69897AA
romimg(852)=0xB3B8A9AF,0xA09EB7B0,0xA596A49D,0xBD9BA3AB
romimg(856)=0x8299BBA2,0xA7BC8C87,0x949391AC,0xB6B5B495
romimg(860)=0xB2BAADAE,0x83B1A8B9,0x84868D88,0x85BF8E89
romimg(864)=0x81BE8F8A,0x117F908B,0x15141312,0x62616016
romimg(868)=0x66656463,0x71706867,0x75747372,0x79787776
romimg(872)=0x7D7C7B7A,0x3AF5697E,0x3007E002,0xE0023AFA
romimg(876)=0xF1FA3807,0xD5C5F5C9,0xB1CD47E5,0x712A700F
romimg(880)=0x27FE7D11,0x5C0E90C2,0x73210016,0xB77E1911
romimg(884)=0x230E90C2,0x36230136,0x0E90C300,0xE5D5C5F5
romimg(888)=0xFEF0E647,0xA87F20C0,0x8BCA0DFE,0x300BFE0F
romimg(892)=0x6F0E2675,0x3421E96E,0x772F7E10,0x0007EEC3
romimg(896)=0x90847432,0xF8C5BFAE,0xC3F2E10B,0x00210F49
romimg(900)=0x00BE0112,0x0D0FD8CD,0x2111FA20,0x3EC3DF0E
romimg(904)=0x4D415200,0x524C4320,0x119D210D,0xC300CB18
romimg(908)=0x96CD087D,0x0332AF01,0x03C001E0,0x21D00011
romimg(912)=0xB0EDD028,0xCD2806EB,0x1A010FD8,0x11731100
romimg(916)=0xED117421,0x3A0036B0,0xC2B71173,0x96CD0E6A
romimg(920)=0x32013E01,0xDEC3E003,0x712A000F,0x71222511
romimg(924)=0x0E39C311,0x7C11712A,0x32CA18FE,0x7122240E
romimg(928)=0x0FDEC311,0x7C11712A,0x0FDECAB7,0x0E7EC325
romimg(932)=0x7D11712A,0x9DD227FE,0x7EC32C0E,0x24002E0E
romimg(936)=0xDA19FE7C,0x18260E7E,0xC3117122,0x712A0E32
romimg(940)=0x28B77D11,0x7EC32D04,0x25272E0E,0x210E7EF2
romimg(944)=0x7EC30000,0x0DA6CD0E,0x0021190E,0xCD2806D0
romimg(948)=0xC20D0FD8,0x73210ECD,0xCD1B0611,0xBFC30FD8
romimg(952)=0x1170210E,0x0118BEAF,0x06D6773C,0xE003322F
romimg(956)=0x70218F18,0xF018AF11,0x7C11712A,0x0FDECAB5
romimg(960)=0x1620B77D,0x2100165C,0x7E191173,0xCD0B20B7
romimg(964)=0xA6CD0FB1,0x00362B0D,0x712A9418,0x161C5C11
romimg(968)=0x11732100,0xB7477E19,0x0228283E,0x712A503E
romimg(972)=0x064F9511,0x0FB1CD00,0xCD1BD1E5,0xB0ED0DA6
romimg(976)=0xF4CDD318,0x07EEC300,0x11712A00,0x00161C5C
romimg(980)=0x19117321,0x000EB77E,0x2E11712A,0x24022827
romimg(984)=0x0FB4CD0C,0xDEC2B77E,0x712AE50F,0x95273E11
romimg(988)=0x28B77947,0x80283E04,0xE1D5D147,0x0DA6CD2B
romimg(992)=0x0036127E,0xF8101B2B,0x2A0FDEC3,0x1C5C1171
romimg(996)=0x73210016,0xB77E1911,0xCA11712A,0x002E0E9D
romimg(1000)=0x2817FE7C,0xC3242405,0x22240E7E,0x32C31171
romimg(1004)=0x11712A0E,0xC1E5D5C5,0x21002811,0x0519CFD8
romimg(1008)=0x060FBEF2,0xC1D10900,0xE00321C9,0x07368A36
romimg(1012)=0x013E0536,0xC9E00332,0x102377AF,0xD1E1C9FC
romimg(1016)=0x3EC9F1C1,0x042AD73A,0x03BACD11,0x11022AEB
romimg(1020)=0xF8CD2B19,0x11062A0F,0xCDD72D3E,0xFFAF03BA

cassetteplayinput=0
cassetteplay=0
audioenabled=1
cassettefname="":cassettefname=dir_cmdline:repeat:if strmid(cassettefname,0,1)=" "{cassettefname=strmid(cassettefname,1,strmid(cassettefname))}else{break}:loop
if cassettefname=""{
cassettefname="default.mzt"
sdim memorino,1024*1024*4//(0x1170-0x10f0)
exist cassettefname
if strsize=-1{
bsave cassettefname,memorino,varsize(memorino),-1
}else{
bload cassettefname,memorino,varsize(memorino),-1
}
lpoke memorino,4*0,0x204f4e01
lpoke memorino,4*1,0x454c4946
repeat 10:poke memorino,4*2+cnt,0x0d:loop
lpoke memorino,18+4*0,0x12000000
wpoke memorino,18+4*1,0x0000
}else{exist cassettefname:strsize2=strsize:sdim memorino,strsize2}
/*cls 4
title "NZ v0.01"*/
dim keymap,256:repeat 256:keymap(cnt)=-1:loop
keymap('A')=0x40 
keymap('B')=0x62 
keymap('C')=0x61 
keymap('D')=0x41 
keymap('E')=0x21 
keymap('F')=0x51 
keymap('G')=0x42 
keymap('H')=0x52 
keymap('I')=0x33 
keymap('J')=0x43 
keymap('K')=0x53 
keymap('L')=0x44 
keymap('M')=0x63 
keymap('N')=0x72 
keymap('O')=0x24 
keymap('P')=0x34 
keymap('Q')=0x20 
keymap('R')=0x31 
keymap('S')=0x50 
keymap('T')=0x22 
keymap('U')=0x23 
keymap('V')=0x71 
keymap('W')=0x30 
keymap('X')=0x70 
keymap('Y')=0x32 
keymap('Z')=0x60 
keymap('1')=0x00 
keymap('2')=0x10 
keymap('3')=0x01 
keymap('4')=0x11 
keymap('5')=0x02 
keymap('6')=0x12 
keymap('7')=0x03 
keymap('8')=0x13 
keymap('9')=0x04 
keymap('0')=0x14 
keymap(' ')=0x91 
keymap('=')=0x25 
keymap(0xBA)=0x54 
keymap(0xBB)=0x25 
keymap(';')=0x54 
keymap(0x10)=0x80 //shift
keymap(0x16)=0x80 //shift
keymap(0x24)=0x90 //home 
keymap(0x2e)=0x81 //del 
keymap(0x08)=0x81 //bs -> del 
keymap(0x28)=0x92 //down 
keymap(0x27)=0x83 //right 
keymap(0x1b)=0x93 //esc -> break 
keymap(0x0d)=0x84 //cr 
keymap(0xbc)=0x73 //, 
keymap(0xbe)=0x64 //. 
keymap(0xbf)=0x74 //'/' 
keymap(0xad)=0x05 //- 
keymap(0xbd)=0x05 //- 
keymap(0x09)=0x65 //tab -> kana
keymap(0x2d)=0x8081 //ins -> shift + del
keymap(0x26)=0x8092 //up -> shift + down
keymap(0x25)=0x8083 //left -> shift + right
i8255pc=0x0F
i8255pa=0xFF
sdim keymatrix,64
memset keymatrix,0xff,64,0
dim fontxys,256,2
bufferidpxy(1)=ginfo(25):buffer bufferidpxy(1),40*8,25*8:gsel bufferidpxy(1):cls:bufferidpxy(2)=ginfo(25):buffer bufferidpxy(2),256,256:bufferidpxy(3)=ginfo(25):buffer bufferidpxy(3),640,480:gsel bufferidpxy(3):memfile fontimg:picload "MEM:fonts.gif":gsel bufferidpxy(2):pos 0,0:gzoom 128,128,bufferidpxy(3),0,0,256,256,0
i8255p555=gettime(7)
repeat 16:h8=cnt
repeat 16:l8=cnt
fontxys(h8*16+l8,0)=l8
fontxys(h8*16+l8,1)=h8
loop
loop
//dupptr textvram,0x50000000,0x1500+65536,2
//dupptr keymatrix,0x50001000+4,64,2
//dupptr optionforcmd,0x50001000+4+64,256,2
sdim textvram,65536
sdim optionforcmd,256
#module
#deffunc z80memaccess int prm_1,int prm_2,int prm_3
prm_1x=prm_1
prm_2x=prm_2
prm_3x=prm_3

switch prm_3x
case 1//read
if prm_1x<0x1000{
if memspswapped@=0{
return peek(romimg@,prm_1x & 0xFFF)
}
return peek(memory@,prm_1x+0xC000)
}
if prm_1x<0xd000 and prm_1x>=0xc000{
if memspswapped@=1{
return peek(romimg@,prm_1x & 0xFFF)
}
return peek(memory@,prm_1x-0x1000)
}
if prm_1x<0xd000{
return peek(memory@,prm_1x-0x1000)
}
if prm_1x<0xd000{
return 0xFF
return
}
if prm_1x<0xe000{
return peek(textvram@,prm_1x-0xd000)
}
if prm_1x<0xf000{
switch prm_1x & 0xFFC//0x0c
case 0x00
	switch prm_1x & 0x0003
	case 0
		return i8255pa@
	swbreak
	case 1
		if (i8255pa@&0xF)<=9{return peek(keymatrix@,(i8255pa@&0xF))}else{return 0xFF}
		//if keyupdoreq=1{gosub *keyupdo}
	swbreak
	case 2
		if vsync@!1{vsync@=1}else{vsync@=0}
		prompt@=gettime(7)
		//promptt=promptt+125:if promptt>=1000{promptt=0}
		//prompt=promptt
		//prompt-=i8255p555
		if prompt@<0{prompt@+=1000}
		return vsync@*0x80|(499<prompt@)*0x40|i8255pc@|((cassetteplay@!0)*0x10)|((cassetteplayinput@!0)*0x20)
		cassetteplayinput@=0
	swbreak
	default
		return 0xFF
	swbreak
	swend
	return
swbreak
case 0x04
	switch prm_1x & 0x0003
	case 0
		if msb@{
		msb@=0
		return timer0@>>8
		}else{
		msb@=1
		return timer0@&0xFF
		}
	swbreak
	case 1
		if msb@{
		msb@=0
		return timer1time@>>8
		}else{
		msb@=1
		return timer1time@&0xFF
		}
	swbreak
	case 2
		if msb@{
		msb@=0
		return timer2time@>>8
		}else{
		msb@=1
		return timer2time@&0xFF
		}
	swbreak
	default
		return 0xFF
	swbreak
	swend
	return
swbreak
case 0x08
ret@=gettime(7)
return ((ret@&0x10)!0)*1
return
swbreak
case 0x0C
memspswapped@=1
//memcpy memory@,memory@,0x1000,0x0000,0xC000
return 0xFF
return
swbreak
case 0x10
memspswapped@=0
//memcpy memory@,memory@,0x1000,0xC000,0x0000
return 0xFF
return
swbreak
default
logmes "read:"+str(prm_1x & 0x0c)
return 0xFF
return
swbreak
swend
return
}
return 0xFF
swbreak
case 0//write
if prm_1x<0x1000{
if memspswapped@=0{
return peek(romimg@,prm_1x & 0xFFF)
}
poke memory@,prm_1x+0xC000,prm_2x
return
}
if prm_1x<0xd000 and prm_1x>=0xc000{
if memspswapped@=1{
return peek(romimg@,prm_1x & 0xFFF)
}
poke memory@,prm_1x-0x1000,prm_2x
return
}
if prm_1x<0xd000{
poke memory@,prm_1x-0x1000,prm_2x
return
}
if prm_1x<0xe000{
//if mzskpit@=0{
poke textvram@,prm_1x-0xd000,prm_2x
//}
return
}
if prm_1x<0xf000{
switch prm_1x & 0xFFC//0x0c
case 0x00
	switch prm_1x & 0x0003
	case 0
		i8255pa@=prm_2x &0x0f
		if ((i8255pa@&0x80)=0){i8255p555@=gettime(7)}
	swbreak
	case 1
	swbreak
	case 2
	i8255pc@=prm_2x 
	gosub *i8255pcwrte
	swbreak
	default
	if prm_2x &0x80{return}
	if prm_2x &0x01{i8255pc@|=((1<<((prm_2x &0x0e)>>1))):gosub *i8255pcwrte}else{i8255pc@&=((1<<((prm_2x &0x0e)>>1))^0xFF):gosub *i8255pcwrte}
	swbreak
	swend
swbreak
case 0x04
	switch prm_1x & 0x0003
	case 0
		if msb@{
		timer0@=prm_2x <<8|rwbuff@
		msb@=0
		logmes timer0@
		soundfreq@=timer0@
		//if audioenabled=1{if soundfreq=0{}else{beep (1000000/(soundfreq+1)),75}}
		}else{
		rwbuff@=prm_2x 
		msb@=1
		}
	swbreak
	case 1
		if msb@{
		timer1@=timer1time@=prm_2x <<8|rwbuff@
		msb@=0
		}else{
		rwbuff@=prm_2x 
		msb@=1
		}
	swbreak
	case 2
		if msb@{
		timer2@=timer2time@=prm_2x <<8|rwbuff@
		msb@=0
		}else{
		rwbuff@=prm_2x 
		msb@=1
		}
	swbreak
	default
	msb@=0
	swbreak
	swend
	return
swbreak
case 0x08
audioenabled=(prm_2x &0x01)
//audio
/*if audioenabled=1{
volhz=(1000000/(soundfreq+1))
sdim wavdata,(volhz)*100+4*11//0x0158AC*2+8
lpoke wavdata,4*0,0x46464952
lpoke wavdata,4*1,varsize(wavdata)-8
lpoke wavdata,4*2,0x45564157
lpoke wavdata,4*3,0x20746D66
lpoke wavdata,4*4,16
wpoke wavdata,4*5+2*0,1
wpoke wavdata,4*5+2*1,1
lpoke wavdata,4*6,(volhz)//0xAC44
wpoke wavdata,4*8+2*1,8
lpoke wavdata,4*9,0x61746164
lpoke wavdata,4*10,varsize(wavdata)-44
lpoke wavdata,4*7,lpeek(wavdata,4*6)*(wpeek(wavdata,4*8+2*1)/8)*wpeek(wavdata,4*5+2*1)
//mes lpeek(wavdata,4*6)*(wpeek(wavdata,4*8+2*1)/8)*wpeek(wavdata,4*5+2*1)
wpoke wavdata,4*8+2*0,(wpeek(wavdata,4*8+2*1)/8)*wpeek(wavdata,4*5+2*1)
wavs=0
repeat ((varsize(wavdata)-4*11)/4)
wavs+=50:if wavs>=100{wavs=30}
wpoke wavdata,4*11+cnt*2,0x6000//|rnd(45)//0x7fff
loop
memfile wavdata,0,varsize(wavdata)
//mmload "MEM:a.wav",0,1
ret=syscall(89,0,varptr("MEM:a.wav"),1,0)
}//else{}//if soundfreq=0{}else{beep (1000000/(soundfreq+1)),62}:soundfreq=0}
gosub *bpsoundctlr@*/
swbreak
case 0x0C
return
swbreak
case 0x10
return
swbreak
default
logmes "write:"+str(prm_1x & 0x0c)
swbreak
swend
}
swbreak
case 2
//poke textvram@,prm_1x+0x1500,prm_2x
return 0
swbreak
case 3
return 0xFF//peek(textvram@,prm_1x+0x1500)
swbreak
swend
return
*i8255pcwrte
	if (i8255pc@&0x01){ginfo3bak=ginfo(3):gsel bufferidpxy@(1),0:cls 4:gsel ginfo3bak,0}else{bswt30s@=1:bswt30stime@=gettime(6)+60:if (bswt30stime@)>=60{bswt30stime@-=60}}
	if (i8255pc@&0x08){if ctpsavingmode@=0{ctpsavingmode@=1:cassetteplay@=1:casrcrcrcrcx@=gettime(7)}:poke memorino@,(casrcrcrcrc@/8),peek(memorino@,(casrcrcrcrc@/8))|((i8255pc@&0x02)>>1)<<(casrcrcrcrc@\8)}else{if ctpsavingmode@=1{cassetteplay@=0:bsave cassettefname@,memorino@,varsize(memorino@),-1:casrcrcrcrc@=0:ctpsavingmode@=0}}
return
#global
sdim memory,65536
address=0
ret=syscall(13,0x100,lpeek(*keydown,0))
ret=syscall(13,0x101,lpeek(*keyup,0))
oscmdlines=""+oscmdline:repeat:if strmid(oscmdlines,0,1)=" "{oscmdlines=strmid(oscmdlines,1,strlen(oscmdlines))}else{break}:loop
//diskfname@(0)=oscmdlines
optionforcmd=oscmdlines
intcools=0
}
if pnotfirstrun=1{
windowtaskenable=1
ret=syscall(4,pid,varptr("Gocaine KMZ-80"))
color 255,255,255
boxf windowx,windowy+8,windowx+windowmaxx,windowy+windowmaxy
ret=syscall(93,lpeek(*syscallprt,0),7,varptr(address),4200,lpeek(*vbiupdateaction,0))
if intcools>=5{gosub *drawbackground
redraw 1
intcools=0
}else{intcools++}
//gsel 0,0
pos windowx+1,windowy+8+1
gzoom windowmaxx,windowmaxy-8,bufferidpxy(1),0,0,40*8,25*8,grpbfsetting
}
pnotfirstrun=1
return

*syscallprt
dim paramate,3
bload "MEM:ORY",paramate
z80memaccess paramate(0),paramate(1),paramate(2)
statue=stat
return statue

*keydownhandler
keydowned=1
if syscallopt@stdcallinterface(3)!0 and syscallopt@stdcallinterface(3)!16 and syscallopt@stdcallinterface(3)!17{keydownedx=1}
return

*keyuphandler
keydowned=0
return

*mpower1
if mpower=0{mpower=1}else{mpower=0}
return

*keydown
wparam2=syscallopt@stdcallinterface(3)
//dialog wparam2
for cntkdku,0,4,1
//repeat 4
keymask=peek(keymap(wparam2),cntkdku)
if wparam2!0x31{
if keymask=0{_break}
if keymask=0{return}
}
keypos=keymask>>4
//keypos=0
keymask=(1<<(keymask&0x0F))^0xFF
poke keymatrix,keypos,peek(keymatrix,keypos)&keymask
next
//loop
return
*keyup
wparam2=syscallopt@stdcallinterface(3)
/*keyupdoreq=1
return
*keyupdo*/
for cntkdku,0,4,1
//repeat 4
keymask=peek(keymap(wparam2),cntkdku)
if wparam2!0x31{
if keymask=0{_break}
//dialog wparam2
if keymask=0{return}
}
keypos=keymask>>4
//keypos=0
keymask=(1<<(keymask&0x0F))
poke keymatrix,keypos,peek(keymatrix,keypos)|keymask
next
//loop
//keyupdoreq=0
return

*bpsoundctlr
if playingbeep=0{
if audioenabled=1{
playingbeep=1
ret=syscall(89,1,0)
//mmplay 0
}else{/*mmstop 0*/:ret=syscall(89,2,0)}}else{if audioenabled=0{/*mmstop 0*/:ret=syscall(89,2,0):playingbeep=0}}
return

*vbiupdateaction
if mzskpit=1 and address=0x03{address=addressforst:mzskpit=0}
if cassetteplay=1{if ctpsavingmode=0{cassetteplayinput=((peek(memorino,(casrcrcrcrc/8))>>(casrcrcrcrc\8)) & 0x01)}:gettimed=gettime(7)-casrcrcrcrcx:if gettimed<0{gettimed+=1000}:if gettimed\3=0{casrcrcrcrc=casrcrcrcrc+1:casrcrcrcrcab=0}:if (casrcrcrcrc/8)=varsize(memorino){casrcrcrcrcxn=0:casrcrcrcrc=0:cassetteplay=0:casrcrcrcrcab=0}}//else{poke memory,_z80rwmemaddr,peek(memory,_z80rwmemaddr)|0x08}}//}else{casrcrcrcrcab=casrcrcrcrcab+1}}//if gettime(7)<=3+casrcrcrcrcx{casrcrcrcrcx=casrcrcrcrcxn:casrcrcrcrcxn=casrcrcrcrcx-gettime(7):if casrcrcrcrcxn<0{casrcrcrcrcxn+=1000}:casrcrcrcrc=casrcrcrcrc+1}}
timer1time-=32:if 1>timer1time and 0<timer1{timer1time+=timer1:timer2time--:if 1>timer2time and 0<timer2{timer2time+=timer2:/*z80interrupt address,0,0xFF*/ret=syscall(93,lpeek(*syscallprt,0),1,varptr(address),0xFF)}}
gosub *hle
return
cntmain++
interruptformt=1
vbismacs=1
emulatorexeci=0
if ((cnt\128)>64)=0{
vbi=1
}else{
vbi=0
}
if (cnt\2048)=0{
if (interruptix\2)=0 and (vbis=1) and (((((interruptlevel>>3)&1)=1) or (interruptlevel&0x7)>0)){if vbismacs=1{/*z80interrupt address,0,2*1:*/ret=syscall(93,lpeek(*syscallprt,0),1,varptr(address),2*1)}:vbis=0}
if (((((interruptlevel>>3)&1)=1) or (interruptlevel&0x7)>1)){/*z80interrupt address,0,2*2:*/ret=syscall(93,lpeek(*syscallprt,0),1,varptr(address),2*2)}
if (interruptix\3)=0 and ((((interruptlevel>>3)&1)=1) or (interruptlevel&0x7)>2){/*z80interrupt address,0,2*3:*/ret=syscall(93,lpeek(*syscallprt,0),1,varptr(address),2*3)}
if (interruptix\5)=0 and ((((interruptlevel>>3)&1)=1) or (interruptlevel&0x7)>4){/*z80interrupt address,0,2*5:*/ret=syscall(93,lpeek(*syscallprt,0),1,varptr(address),2*5)}
if vbis=1{vbis=0}
emulatorexeci=0
interruptix+=1:if interruptix>=100{interruptix=0}
}
return
*hle
switch address
case 0x21//save header
//memcpy memorino,memory,(0x1170-0x10f0),0,0x10f0
repeat (0x1170-0x10f0)
z80memaccess cnt+0x10f0,0,1
poke memorino,cnt,stat
loop
bsave cassettefname,memorino,varsize(memorino),-1
logmes "saved header"
gosub *hlepcpop
swbreak
case 0x24//save body
//memcpy memorino,memory,(peek(memory,0x1102)|(peek(memory,0x1103)<<8)),(peek(memory,0x1104)|(peek(memory,0x1105)<<8))+(peek(memory,0x1102)|(peek(memory,0x1103)<<8))+(0x1170-0x10f0),peek(memory,0x1104)|(peek(memory,0x1105)<<8)
//memcpy memorino,memory,(peek(memory,0x1102)|(peek(memory,0x1103)<<8)),(0x1170-0x10f0),peek(memory,0x1104)|(peek(memory,0x1105)<<8)
z80memaccess 0x1102,0,1
datasize=stat
z80memaccess 0x1103,0,1
datasize|=stat<<8
z80memaccess 0x1104,0,1
dataaddr=stat
z80memaccess 0x1105,0,1
dataaddr|=stat<<8
repeat datasize
z80memaccess cnt+dataaddr,0,1
poke memorino,cnt+(0x1170-0x10f0),stat
loop
bsave cassettefname,memorino,varsize(memorino),-1
logmes "saved body"
gosub *hlepcpop
swbreak
case 0x27//load header
bload cassettefname,memorino,varsize(memorino),-1
//memcpy memory,memorino,(0x1170-0x10f0),0x10f0,0
repeat (0x1170-0x10f0)
z80memaccess cnt+0x10f0,peek(memorino,cnt),0
loop
logmes "loaded header"
gosub *hlepcpop
swbreak
case 0x2A//load body
bload cassettefname,memorino,varsize(memorino),-1
;memcpy memory,memorino,(peek(memory,0x1102)|(peek(memory,0x1103)<<8)),peek(memory,0x1104)|(peek(memory,0x1105)<<8),(0x1170-0x10f0)
z80memaccess 0x1102,0,1
datasize=stat
z80memaccess 0x1103,0,1
datasize|=stat<<8
z80memaccess 0x1104,0,1
dataaddr=stat
z80memaccess 0x1105,0,1
dataaddr|=stat<<8
repeat datasize
z80memaccess cnt+dataaddr,peek(memorino,cnt+(0x1170-0x10f0)),0
loop
logmes "loaded body"
gosub *hlepcpop
swbreak
case 0x2D//verify body
logmes "verify body"
gosub *hlepcpop
swbreak
swend
return
*hlepcpop
sp=syscall(93,lpeek(*syscallprt,0),5,0,12)|(syscall(93,lpeek(*syscallprt,0),5,0,13)<<8)
z80memaccess sp+0,0,1
poke address,0,stat
z80memaccess sp+1,0,1
poke address,1,stat
//address=wpeek(memory,sp)
sp=sp+2
ret=syscall(93,lpeek(*syscallprt,0),6,0,12,(sp)&0xFF)
ret=syscall(93,lpeek(*syscallprt,0),6,0,13,(sp>>8)&0xFF)
//stackpoke 0,0,12,(sp)&0xFF
//stackpoke 0,0,13,(sp>>8)&0xFF
return

*drawbackground
ginfo3bak=ginfo(3):grpupdatei=0:gsel bufferidpxy(1):redraw 0:cntold=0:repeat 1000:cnt2=cnt:if (cnt2\40)=0{cntold=cnt2}:pos (cnt2-cntold)*8,(cntold/40)*8:gcopy bufferidpxy(2),fontxys(peek(textvram,cnt2),0)*8,fontxys(peek(textvram,cnt2),1)*8,8,8:loop:redraw 1:gsel ginfo3bak//:pos 0,0:gzoom ginfo(26),ginfo(27),1,0,0,40*8,25*8,0:redraw 1:await
return
